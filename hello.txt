pipeline {
    agent any

    tools {
        maven 'MAVEN_HOME'
    }

    stages {

        stage('git repo & clean') {
            steps {
                bat 'rmdir /s /q webapp || exit 0'
                bat 'git clone https://github.com/vedagna21/webapp.git'
                bat 'mvn clean -f webapp/pom.xml'
            }
        }

        stage('install') {
            steps {
                bat 'mvn install -f webapp/pom.xml'
            }
        }

        stage('test') {
            steps {
                bat 'mvn test -f webapp/pom.xml'
            }
        }

        stage('package') {
            steps {
                bat 'mvn package -f webapp/pom.xml'
            }
        }
    }
}
//////// minikube ///////
minikube start --driver=docker
minikube status
(installation)-minikube kubectl -- get pods -A, kubectl version --clien
kubectl create deployment mynginx --image=nginx
(verify)
kubectl get deployments
kubectl get pods
kubectl describe pods
(Exposed Deployment as a Service (NodePort)
I exposed Nginx to make it accessible outside the cluster:)
kubectl expose deployment mynginx --type=NodePort --port=80 --target-port=80
(Scaled the Deployment)
kubectl scale deployment mynginx --replicas=4
(Accessed Nginx Application)
kubectl port-forward svc/mynginx 8081:80 (open 8081)
minikube dashboard
kubectl delete deployment mynginx
kubectl delete service mynginx
minikube stop
///nagios///
docker pull jasonrivers/nagios:latest
docker run --name nagiosdemo -p 8888:80 jasonrivers/nagios:latest
in http://localhost:8888
Logged in using:
Username: nagiosadmin
Password: nagios
docker stop nagiosdemo
docker rm nagiosdemo
docker rmi jasonrivers/nagios:latest




